<h2 class="mb-4">Grannies You Own</h2>

<% @grannies.each do |granny| %>
  <div class="mb-5">
    <h4><%= granny.name %></h4>

    <% if granny.reservations.any? %>
      <% granny.reservations.each do |res| %>
        <div class="card p-3 mb-3">
          <p><strong>Booked by:</strong> <%= res.user.full_name %></p>
          <p><strong>From:</strong> <%= res.start_date %> â€” <strong>To:</strong> <%= res.end_date %></p>
          <p><strong>Status:</strong> <%= res.status.capitalize %></p>

          <% if res.pending? %>
            <div class="d-flex gap-2 mt-2">
              <%= button_to "Accept", confirm_reservation_path(res), method: :patch, class: "btn btn-success btn-sm" %>
              <%= button_to "Reject", cancel_reservation_path(res), method: :patch, class: "btn btn-danger btn-sm" %>
            </div>
          <% end %>
        </div>
      <% end %>
    <% else %>
      <p class="text-muted">No reservations for this granny yet.</p>
    <% end %>
  </div>
<% end %>
