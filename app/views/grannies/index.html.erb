<div id="reservation-dashboard-root"></div>

<script>
  // Set up Mapbox token using your existing env variable
  window.mapboxAccessToken = '<%= ENV['MAPBOX_API_KEY'] %>';

  // Real reservation data from controller
  const reservations = <%= @reservations_json.to_json.html_safe %>;

  const currentUser = {
    name: "<%= current_user&.name || 'Guest' %>"
  };

  // Render the React component
  document.addEventListener('DOMContentLoaded', function() {
    const dashboardRoot = document.getElementById('reservation-dashboard-root');
    if (dashboardRoot && window.React && window.ReactDOM && window.ReservationDashboard) {
      const element = React.createElement(window.ReservationDashboard, {
        reservations: reservations,
        user: currentUser
      });
      ReactDOM.render(element, dashboardRoot);
    }
  });
</script>
