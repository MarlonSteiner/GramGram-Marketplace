<div class="container m-4">
  <div class="row">
    <div class="col">
      <%= image_tag "icons/arrow_icon.svg" %>
    </div>
    <div class="col">
      <%= cl_image_tag @granny.image.key %>
    </div>
    <div class="col">
      <div><h2 class="text-uppercase fw-bold text-dark mb-0" style="letter-spacing": 2px;><%= @granny.name %></h2></div>
      <div class="container">
        <div class="row">

        </div>
          <h4 class="fw-bold">Stats</h4>
          <p class="fw-semibold">Health -</p>
          <p class="fw-semibold">Speed -</p>
          <p class="fw-semibold">Wisdom -</p>
          <p class="fw-semibold">Teeth -</p>
          <div class="text-center mt-auto">
          <h3 class="text-success fw-bold mb-0">
            $<%= @granny.price %> / day
          </h3>
        </div>
      </div>
      <div>
      </div>
    </div>
  </div>
</div>
<%# Granny Details %>
<h1><%= @granny.name %></h1>
<p><%= @granny.bio %></p>
<p>Location: <%= @granny.location %></p>
<p>Price: R<%= @granny.price %>/day</p>
<p>Available: <%= @granny.available ? 'Yes' : 'No' %></p>
<p>Average Rating: <%= @granny.average_rating %></p>

<hr>

<h3>Book This Granny</h3>

<% if @reservation.errors.any? %>
  <div class="alert alert-danger">
    <ul>
      <% @reservation.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<%= simple_form_for([@granny, @reservation]) do |f| %>
  <%= f.input :start_date, input_html: { min: Date.today } %>
  <%= f.input :end_date, input_html: { min: Date.today + 1 } %>
  <%= f.button :submit, "Book" %>
<% end %>

<hr>

<h3>Leave a Review</h3>
<%= simple_form_for([@granny, @review]) do |f| %>
  <%= f.input :comment %>
  <%= f.input :rating %>
  <%= f.button :submit, "Submit Review" %>
<% end %>

<h3>Reviews:</h3>
<% @granny.reviews.each do |review| %>
  <div>
    <p><strong><%= review.user.full_name %></strong>: <%= review.comment %> — <%= review.rating %>⭐</p>
  </div>
<% end %>

<% if @reservation.errors.any? %>
  <div class="alert alert-danger">
    <ul>
      <% @reservation.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<!--This is a map that we need to need to position in the rigth-->
<div style="width: 100%; height: 600px;"
  data-controller="map"
  data-map-markers-value="<%= @markers.to_json %>"
  data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
</div>
